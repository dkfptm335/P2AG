<!DOCTYPE html>
<html>
<head>
    <title>개인정보처리방침 생성 폼 입력 확인</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='nextForm.css') }}">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var num = 1; // 시작 번호
            var security_num = 1;
            var elements = document.querySelectorAll('h2');

            elements.forEach(function(element) {
                element.innerHTML = element.innerHTML.replace('{{num}}', num++);
            });
        });
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</head>
<body>
<div class="header">
    {{name}} 개인정보처리방침 생성 두번째 폼
</div>
<div class="form-container">
    <form id="privacyForm" action="/nextForm1_2Confirm" method="post" enctype="multipart/form-data">
        <div class="form-group">
            <!-- 두번째 checkbox -->
            <div class="checkbox-option">
                <input type="checkbox" id="checkBox2" name="checkBoxList" value="checkBox2" class="checkbox-input">
                <label for="checkBox2" class="checkbox-custom-label"><strong>개인정보처리 위탁에 관한 사항</strong></label>
                <ul class="sub_checkbox" id="SubCheckList2">
                    <fieldset>
                        <legend>대학교 개인정보 위탁 추천 항목</legend>
                        <p>※ 대학교에서 많이 기재되는 '개인정보처리 위탁에 관한 사항'의 추천 문구 입니다. 아래의 항목을 선택하시면 업무 내용이 자동 생성되고 수탁사는 직접 작성해야
                            합니다.</p>

                        <table id="data-table2">
                            <thead>
                            <tr class="columns">
                                <th class="check">선택</th>
                                <th class="information">업무내용(일반)</th>
                                <th class="trustee">수탁사(안내문구) <span class="faded-text">사용자 입력</span></th>
                            </tr>
                            </thead>
                            <tbody>
                            <!-- 원서접수 -->
                            <tr class="Row2">
                                <td class="check"><input type="checkbox" value="check2" name="checklist2"></td>
                                <td class="information">입학전형 온라인 접수 및 전형료 수납</td>
                                <td class="trustee">
                                    <input class="trustee-input" placeholder="진학어플라이, 유웨이어플라이, 한국대학교육협의회">
                                </td>

                            </tr>
                            <!-- 증명서 발급 -->
                            <tr class="Row2">
                                <td class="check"><input type="checkbox" value="check2" name="checklist2"></td>
                                <td class="information">증명서 발급</td>
                                <td class="trustee">
                                    <input class="trustee-input" placeholder="디지털존, 씨아이테크 등">
                                </td>

                            </tr>
                            <!-- 등록금 납부 -->
                            <tr class="Row2">
                                <td class="check"><input type="checkbox" value="check2" name="checklist2"></td>
                                <td class="information">등록금 납부</td>
                                <td class="trustee">
                                    <input class="trustee-input" placeholder="OO은행, OO카드">
                                </td>

                            </tr>
                            <!-- 학생증 발급 -->
                            <tr class="Row2">
                                <td class="check"><input type="checkbox" value="check2" name="checklist2"></td>
                                <td class="information">학생증 발급</td>
                                <td class="trustee">
                                    <input class="trustee-input" placeholder="OO은행, OO카드">
                                </td>

                            </tr>

                            </tbody>
                        </table>
                    </fieldset>
                </ul>
            </div>

            <!-- 세번째 checkbox(수탁사&재수탁사) -->
            <div class="checkbox-option">
                <input type="checkbox" id="checkBox3" name="checkBoxList" value="checkBox3" class="checkbox-input">
                <label for="checkBox3" class="checkbox-custom-label"><strong>위탁 사항 추가 - 유형별 위탁 업무 내용 선택 및 위탁사, 재위탁사
                    작성</strong></label>
                <ul class="sub_checkbox" id="SubCheckList3">
                    <div class="trusteeList-classification">
                        <li>수탁사 명<input type="text" name="add_trustee" class="form-input"
                                        placeholder="수탁사 명"></li>
                    </div>
                    <div class="trusteeList-classification">
                        <li>분류 1
                            <div class="radio-container">
                                <input type="radio" name="classification1" value="classification1"> 시스템
                                <input type="radio" name="classification1" value="classification2"> 홈페이지
                                <input type="radio" name="classification1" value="classification3"> 기기 장비
                            </div>
                        </li>
                    </div>
                    <div class="trusteeList-classification">
                        <li>분류 2
                            <div class="checkbox-container">
                                <input type="checkbox" name="classification2" value="classification1"> 유지보수
                                <input type="checkbox" name="classification2" value="classification2"> 운영
                                <input type="checkbox" name="classification2" value="classification3"> 구축
                                <input type="checkbox" name="classification2" value="classification4"> 개발
                            </div>
                        </li>
                    </div>
                    <div class="trusteeList-classification">
                        <li>분류 3
                            <div class="radio-container" id="radioContainer">
                                <input type="radio" name="classification3" value="classification1"> DB
                                <input type="radio" name="classification3" value="classification2"> 전자문서
                                <input type="radio" name="classification3" value="classification3"> 전산
                                <input type="radio" name="classification3" value="classification4"> 전자출결관리
                                <input type="radio" name="classification3" value="classification5"> 인터넷증명발급
                                <input type="radio" name="classification3" value="classification6"> 입학관리
                                <input type="radio" name="classification3" value="classification7"> 연말정산
                                <input type="radio" name="classification3" value="classification8"> 출입관리
                                <input type="radio" name="classification3" value="classification9"> 학사행정
                                <input type="radio" name="classification3" value="classification10"> 그룹웨어
                                <input type="radio" name="classification3" value="classification11"> LMS
                                <input type="radio" name="classification3" value="classification12"> 통합정보
                                <input type="radio" name="classification3" value="classification13"> 논문 온라인 제출
                                <input type="radio" name="classification3" value="classification14"> 도서관리
                                <input type="radio" name="classification3" value="other" id="otherOption"> 기타
                                <input type="text" placeholder="기타사항" id="otherText" disabled>
                            </div>
                        </li>
                    </div>
                    <!-- 재위탁 여부 -->
                    <div class="trusteeList-classification">
                        <li>재수탁 여부
                            <input type="checkbox" name="re_trustee" value="re_trustee1" id="re_trustee"> 재수탁 하시겠습니까?
                            <ul class="sub_checkbox" id="re_trusteeList">
                                <div id="fieldsetContainer">
                                    <fieldset>
                                        <legend>재수탁사</legend>
                                        <div class="re_trusteeList_div">
                                            <div class="retrusteeList-classification">
                                                <li>재수탁사 명<input type="text" name="add_trustee" class="form-input"
                                                                 placeholder="재수탁사 명"></li>
                                            </div>
                                            <div class="retrusteeList-classification">
                                                <li>분류 1
                                                    <div class="radio-container">
                                                        <input type="radio" name="classification1"
                                                               value="classification1">
                                                        시스템
                                                        <input type="radio" name="classification1"
                                                               value="classification2">
                                                        홈페이지
                                                        <input type="radio" name="classification1"
                                                               value="classification3">
                                                        기기 장비
                                                    </div>
                                                </li>
                                            </div>
                                            <div class="retrusteeList-classification">
                                                <li>분류 2
                                                    <div class="checkbox-container">
                                                        <input type="checkbox" name="classification2"
                                                               value="classification1">
                                                        유지보수
                                                        <input type="checkbox" name="classification2"
                                                               value="classification2">
                                                        운영
                                                        <input type="checkbox" name="classification2"
                                                               value="classification3">
                                                        구축
                                                        <input type="checkbox" name="classification2"
                                                               value="classification4">
                                                        개발
                                                    </div>
                                                </li>
                                            </div>
                                            <div class="retrusteeList-classification">
                                                <li>분류 3
                                                    <div class="radio-container" id="radioContainer2">
                                                        <input type="radio" name="classification3"
                                                               value="classification1">
                                                        DB
                                                        <input type="radio" name="classification3"
                                                               value="classification2">
                                                        전자문서
                                                        <input type="radio" name="classification3"
                                                               value="classification3">
                                                        전산
                                                        <input type="radio" name="classification3"
                                                               value="classification4">
                                                        전자출결관리
                                                        <input type="radio" name="classification3"
                                                               value="classification5">
                                                        인터넷증명발급
                                                        <input type="radio" name="classification3"
                                                               value="classification6">
                                                        입학관리
                                                        <input type="radio" name="classification3"
                                                               value="classification7">
                                                        연말정산
                                                        <input type="radio" name="classification3"
                                                               value="classification8">
                                                        출입관리
                                                        <input type="radio" name="classification3"
                                                               value="classification9">
                                                        학사행정
                                                        <input type="radio" name="classification3"
                                                               value="classification10">
                                                        그룹웨어
                                                        <input type="radio" name="classification3"
                                                               value="classification11">
                                                        LMS
                                                        <input type="radio" name="classification3"
                                                               value="classification12">
                                                        통합정보
                                                        <input type="radio" name="classification3"
                                                               value="classification13">
                                                        논문
                                                        온라인
                                                        제출
                                                        <input type="radio" name="classification3"
                                                               value="classification14">
                                                        도서관리
                                                        <input type="radio" name="classification3" value="other"
                                                               id="otherOption2">
                                                        기타
                                                        <input type="text" placeholder="기타사항" id="otherText2" disabled>
                                                    </div>
                                                </li>
                                            </div>
                                        </div>
                                    </fieldset>
                                </div>
                                <button type="button" id="addRow_retrustee">재수탁사 추가하기</button>

                            </ul>
                        </li>
                    </div>
                </ul>

            </div>
        </div>
        <!-- 제출 버튼 -->
        <div class="submit-div">
            <button type="submit" id="confirm" class="submit-button" name="action" value="confirm">미리보기</button>
            <button type="submit" id="result" class="submit-button" name="action" value="result">다음 폼</button>
        </div>
    </form>
</div>

<script>
    document.getElementById('confirm').addEventListener('click', function() {
        const selectedRows = document.querySelectorAll('#data-table .Row input[type="checkbox"]:checked');

        Array.from(selectedRows).forEach(row => {
            const recipient = row.closest('.Row').querySelector('.recipient').textContent;
            const purpose = row.closest('.Row').querySelector('.purpose textarea').value;
            const items = row.closest('.Row').querySelector('.items textarea').value;

            console.log(`제공받는 자: ${recipient}, 제공 목적: ${purpose}, 제공 항목: ${items}`); // 콘솔에 출력
            // 여기에서 선택된 정보를 서버에 전송하거나 로컬 스토리지에 저장할 수 있습니다.
        });
    });
</script>

<script>


    document.getElementById('addRow_retrustee').addEventListener('click', function() {
        // 새 fieldset 요소 생성
        var fieldset = document.createElement('fieldset');

        // fieldset에 추가할 내용. 예를 들어, 여기에 더 많은 요소를 추가할 수 있습니다.
        fieldset.innerHTML = `
            <legend>재수탁사</legend>
            <div class="re_trusteeList_div">
                <div class="retrusteeList-classification">
                    <li>재수탁사 명<input type="text" name="add_trustee" class="form-input"
                                     placeholder="재수탁사 명"></li>
                </div>
                <div class="retrusteeList-classification">
                    <li>분류 1
                        <div class="radio-container">
                            <input type="radio" name="classification1" value="classification1"> 시스템
                            <input type="radio" name="classification1" value="classification2"> 홈페이지
                            <input type="radio" name="classification1" value="classification3"> 기기 장비
                        </div>
                    </li>
                </div>
                <div class="retrusteeList-classification">
                    <li>분류 2
                        <div class="checkbox-container">
                            <input type="checkbox" name="classification2" value="classification1"> 유지보수
                            <input type="checkbox" name="classification2" value="classification2"> 운영
                            <input type="checkbox" name="classification2" value="classification3"> 구축
                            <input type="checkbox" name="classification2" value="classification4"> 개발
                        </div>
                    </li>
                </div>
                <div class="retrusteeList-classification">
                    <li>분류 3
                        <div class="radio-container" id="radioContainer2">
                            <input type="radio" name="classification3" value="classification1"> DB
                            <input type="radio" name="classification3" value="classification2"> 전자문서
                            <input type="radio" name="classification3" value="classification3"> 전산
                            <input type="radio" name="classification3" value="classification4"> 전자출결관리
                            <input type="radio" name="classification3" value="classification5"> 인터넷증명발급
                            <input type="radio" name="classification3" value="classification6"> 입학관리
                            <input type="radio" name="classification3" value="classification7"> 연말정산
                            <input type="radio" name="classification3" value="classification8"> 출입관리
                            <input type="radio" name="classification3" value="classification9"> 학사행정
                            <input type="radio" name="classification3" value="classification10"> 그룹웨어
                            <input type="radio" name="classification3" value="classification11"> LMS
                            <input type="radio" name="classification3" value="classification12"> 통합정보
                            <input type="radio" name="classification3" value="classification13"> 논문 온라인 제출
                            <input type="radio" name="classification3" value="classification14"> 도서관리
                            <input type="radio" name="classification3" value="other" id="otherOption2"> 기타
                            <input type="text" placeholder="기타사항" id="otherText2" disabled>
                        </div>
                    </li>
                </div>
            </div>`;
        // fieldset을 div에 추가
        document.getElementById('fieldsetContainer').appendChild(fieldset);
    });
</script>

<script>


    const Checkbox2 = document.getElementById('checkBox2');
    const SubChecklist2 = document.getElementById('SubCheckList2');

    Checkbox2.addEventListener('change', function() {
        if (this.checked) {
            SubChecklist2.style.display = 'block';
        } else {
            SubChecklist2.style.display = 'none';
        }
    });

    const Checkbox3 = document.getElementById('checkBox3');
    const SubChecklist3 = document.getElementById('SubCheckList3');

    Checkbox3.addEventListener('change', function() {
        if (this.checked) {
            SubChecklist3.style.display = 'block';
        } else {
            SubChecklist3.style.display = 'none';
        }
    });

    const reTrustee = document.getElementById('re_trustee');
    const reTrusteeList = document.getElementById('re_trusteeList');

    reTrustee.addEventListener('change', function() {
        if (this.checked) {
            reTrusteeList.style.display = 'block';
        } else {
            reTrusteeList.style.display = 'none';
        }
    });

    document.getElementById("radioContainer").addEventListener("click", function(event) {
        if (event.target.type === "radio" && event.target.value === "other") {
            document.getElementById("otherText").disabled = false;
        } else if (event.target.type === "radio") {
            document.getElementById("otherText").disabled = true;
        }
    });


    document.getElementById('addDateButton').addEventListener('click', function() {
        // 새로운 div 요소 생성
        var newDiv = document.createElement('div');

        // 첫 번째 날짜 입력 필드 생성 및 설정
        var newInput1 = document.createElement('input');
        newInput1.type = 'date';
        newInput1.name = 'start_date';
        newInput1.className = 'form-input';

        // <p> 요소 생성 및 '~' 텍스트 설정
        var pElement = document.createElement('p');
        pElement.innerText = ' ~ '; // 혹은 pElement.textContent = ' ~ ';
        pElement.style.display = 'inline'; // <p>를 인라인 요소처럼 보이도록 설정

        // 두 번째 날짜 입력 필드 생성 및 설정
        var newInput2 = document.createElement('input');
        newInput2.type = 'date';
        newInput2.name = 'end_date';
        newInput2.className = 'form-input';

        // 새로운 div에 첫 번째 입력 필드, <p> 요소, 두 번째 입력 필드 추가
        newDiv.appendChild(newInput1);
        newDiv.appendChild(pElement);
        newDiv.appendChild(newInput2);

        // 날짜 입력 필드를 담고 있는 컨테이너에 새로운 div 요소 추가
        document.getElementById('dateInputsContainer').appendChild(newDiv);
    });

</script>

<script>
    window.onload = function () {
        var message = "{{ error }}";
        if (message) {
            alert(message);
        }
    }
</script>
</body>

</html>
